clear; close all; clc;
% ref ~ 0.4071
ur = [8.0000000e+00   8.0000000e+00   8.0000000e+00   1.5000000e+01   1.5000000e+01   1.5000000e+01   1.5000000e+01   1.5000000e+01   1.5000000e+01   1.5000000e+01   1.5000000e+01   1.5000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   7.5000000e+01   7.5000000e+01   7.5000000e+01   7.5000000e+01   1.5000000e+02   1.5000000e+02   1.5000000e+02   1.5000000e+02   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.7000000e+01   3.7000000e+01   3.7000000e+01   3.7000000e+01   4.3000000e+01   4.3000000e+01   4.3000000e+01   4.3000000e+01   4.7000000e+01   4.7000000e+01   4.7000000e+01   4.7000000e+01   5.1000000e+01   5.1000000e+01   5.1000000e+01   5.1000000e+01   5.7000000e+01   5.7000000e+01   5.7000000e+01   5.7000000e+01   6.1000000e+01   6.1000000e+01   6.1000000e+01   6.1000000e+01   6.5000000e+01   6.5000000e+01   6.5000000e+01   6.5000000e+01   7.2000000e+01   7.2000000e+01   7.2000000e+01   7.2000000e+01   7.6000000e+01   7.6000000e+01   7.6000000e+01   7.6000000e+01   8.0000000e+01   8.0000000e+01   8.0000000e+01   8.0000000e+01   8.4000000e+01   8.4000000e+01   8.4000000e+01   8.4000000e+01   9.0000000e+01   9.0000000e+01   9.0000000e+01   9.0000000e+01   1.3600000e+02   1.3600000e+02   1.3600000e+02   1.3600000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.3000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02   1.2000000e+02
   2.2000000e+01   2.2000000e+01   2.2000000e+01   2.2000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.5000000e+01   3.4000000e+01   3.4000000e+01   3.4000000e+01   3.4000000e+01   3.3000000e+01   3.3000000e+01   3.3000000e+01   3.3000000e+01   3.2000000e+01   3.2000000e+01   3.2000000e+01   3.2000000e+01   3.1000000e+01   3.1000000e+01   3.1000000e+01   3.1000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   3.0000000e+01   2.9000000e+01   2.9000000e+01   2.9000000e+01   2.9000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01   2.3000000e+01];

end_num = 10;

figure; 
set(gcf,'Position',[300 150 1200 800])
subplot(2, 1, 1)
legend
hold on; stairs(ur(1, :), 'k--')
subplot(2, 1, 2)
hold on; stairs(ur(2, :), 'k--')

for k = 1:6
    seed = floor(end_num/5)*(k-1);
    name = 'DDPG-STACKING-STACKING-S0-1001-0-TESTING-test-';
    name1 = strcat(name, num2str(seed), '-u-', num2str(0), '.txt');
    
    cost_file = fopen(name1, 'r');
    data_raw = fscanf(cost_file, '%f');
    fclose(cost_file);
    
    row_num = 231;
    col_num = 2;
    u = reshape(data_raw, col_num, row_num)';
    
    subplot(2, 1, 1)
    hold on; stairs(u(:, 1))
    subplot(2, 1, 2)
    hold on; stairs(u(:, 2))
end

for k = 1:10
    seed = (k-1);
    name2 = strcat(name, num2str(seed), '-y-', num2str(0), '.txt');
    cost_file = fopen(name2, 'r');
    data_raw = fscanf(cost_file, '%f');
    fclose(cost_file);
    row_num = 231;
    x = reshape(data_raw, 5, 231)';
    x(:, 11) = -log10(x(:, 11));
    
    
    subplot(2, 1, 1)
    hold on; stairs(ylim(:, 1))
    subplot(2, 2, 2)
    hold on; stairs(u(:, 2))
    subplot(2, 2, 3)
    hold on; stairs(u(:, 1))
    subplot(2, 2, 4)
    hold on; stairs(u(:, 2))
end


% for k = 7:11
%     figure
%     plot(x(:, k))
% end

cc = zeros(1, end_num);
for k = 1:end_num
    name1 = strcat(name, num2str(k), '-c-', num2str(0), '.txt');
    
    cost_file = fopen(name1, 'r');
    data_raw = fscanf(cost_file, '%f');
    fclose(cost_file);
    
    row_num = 231;
    col_num = 1;
    c = reshape(data_raw, col_num, row_num)';
    cc(k) = sum(c);
end

figure;
plot(cc)
title('cost')
hold on
plot(0.4071*ones(size(cc)), '--k')
